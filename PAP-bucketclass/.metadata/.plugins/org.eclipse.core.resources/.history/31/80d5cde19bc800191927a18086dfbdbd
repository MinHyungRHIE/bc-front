package com.pap.bucketclass.controller;

import java.security.Principal;

import org.springframework.http.MediaType;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.pap.bucketclass.model.ResponseModel;

@Controller
public class LoginController {
	
	@RequestMapping(
			value="/login",
			method=RequestMethod.GET
			)
	public String loginForm() {
		return "member-login";
	}
	
	@RequestMapping(
			path="/login",
			method=RequestMethod.POST,
			produces= {MediaType.APPLICATION_JSON_UTF8_VALUE})
	@ResponseBody
	public String loginSuccess(Principal principal) {
		principal.getName();
		return "success";
	}
	private void getUserDetails() {
		UserDetails userDetails = (UserDetails)SecurityContextHolder.getContext().
				getAuthentication().getPrincipal();
		System.out.println(userDetails.getPassword());
		System.out.println(userDetails.getUsername());
		System.out.println(userDetails.isEnabled());
	} 
	
}
